<%= error_messages_for 'project',
:header_message => 'Project Error',
:message => "Sorry, but there were some problems with the Project." %>

<h2>Projects</h2>
<table>
	<% unless @projects.blank? %>
	<% unless @projects.size == 0 %>
	<tr>
		<th>Name</th>
		<th>Files</th>
		<th>Jobs</th>
		<th colspan="3">Actions</th>
	</tr>
	<% else %>
		<p>You have no projects.</p>
	<% end %>
	<% for project in @projects %>
		<tr>
			<td><%= link_to h(project.name), {:action => "show_project", :id => project.id} %></td>
			<td class="files"><%= h(project.sfiles.count) %></td>
			<td class="jobs"><%= h(project.jobs.count) %></td>
			<td><%= button_to "Open", {:action => "show_project", :id => project.id} %></td>
                        <td><%= button_to "Rename", {:action => "edit_project", :id => project.id} %></td>
			<td><%= button_to "Delete", {:action => "delete_project", :id => project.id}, :confirm => "Are you sure you want to delete project #{h(project.name)} and all associated files?" %></td>
		</tr>
	<% end%>
	<% end%>
</table>

<fieldset>
	<legend>Create a new project</legend>
	
	<% form_for :project, @project, :url => {:action => "create_project"} do |form| %>
		<p>
			name: <%= form.text_field :name, :size => 20 %>
		</p>
		<input type="hidden" id="user_id" name="project[user_id]" value="<%= h(session[:user_id]) %>" />
		<%= submit_tag "Create", :class => "submit" %>

	<% end%>
</fieldset>
